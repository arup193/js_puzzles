CC = g++-15
CC_VER = --std=c++20
CC_FLAGS = -O2

SYSTEM_TYPES = system_types.h
HOOK_PENT_SOLVER = hook_pent_solver
HOOK_SOLVER = hook_solver
HOOK_SOLVER_HEADER = $(HOOK_SOLVER).h
HOOK_SOLVER_LIB = $(HOOK_SOLVER).o
PENT_SOLVER = pent_solver
PENT_UTIL = pent_util
PENT_UTIL_HEADER = $(PENT_UTIL).h
PENT_UTIL_LIB = $(PENT_UTIL).o

$(HOOK_PENT_SOLVER): $(HOOK_PENT_SOLVER).cpp $(HOOK_SOLVER_HEADER) \
		$(HOOK_SOLVER_LIB) $(SYSTEM_TYPES) $(PENT_UTIL_HEADER) $(PENT_UTIL_LIB)
	$(CC) $(CC_VER) $(CC_FLAGS) $(HOOK_SOLVER_LIB) $(PENT_UTIL_LIB) \
			$(HOOK_PENT_SOLVER).cpp -o $@

$(HOOK_SOLVER_LIB): $(HOOK_SOLVER_HEADER) $(HOOK_SOLVER).cpp $(SYSTEM_TYPES)
	$(CC) $(CC_VER) $(CC_FLAGS) -c $(HOOK_SOLVER).cpp -o $@

$(PENT_SOLVER): $(PENT_UTIL_HEADER) $(PENT_UTIL_LIB) $(SYSTEM_TYPES) \
		$(PENT_SOLVER).cpp
	$(CC) $(CC_VER) $(CC_FLAGS) $(PENT_UTIL_LIB) $(PENT_SOLVER).cpp -o $@

$(PENT_UTIL_LIB): $(SYSTEM_TYPES) $(PENT_UTIL).cpp $(PENT_UTIL_HEADER)
	$(CC) $(CC_VER) $(CC_FLAGS) -c $(PENT_UTIL).cpp -o $@

clean:
	rm -f *.o $(HOOK_PENT_SOLVER) $(PENT_SOLVER)
	rm -rf .DS_Store *.dSYM .vscode
